
{% macro link(row, text) -%}
<a href="https://github.com/esmf-org/temp-artifacts/tree/{{row.hash}}/{{row.esmf_branch}}/{{row.compiler}}/{{row.compiler_ver}}/{{row.bopt}}/{{row.mpi}}/{{row.mpi_ver }}">{{text}}</a>
{%- endmacro %}

<html>
<head>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
          integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script type="text/javascript" charset="utf8"
          src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>

  <!-- Bootstrap 5 Styling -->
  <script type="text/javascript" charset="utf8"
          src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
  <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css"/>

  <script>
          $(document).ready(function () {
              $('#results').DataTable({
                  paging: false
              });
          });
  </script>
</head>

<body>
<div class="p-3 text-left bg-light">
    <h3 class="mb-2">Results for ESMF hash: {{hash}} (branch: {{branch}})</h3>
</div>

<div class="container table-responsive">
  <table id="results" class="table table-bordered table-hover">
    <thead class="table-light">
    <tr>
      <th>Machine</th>
      <th>Compiler</th>
      <th>MPI</th>
      <th>BOPT</th>
      <th>NetCDF</th>
      <th>Collected</th>
      <th>Build</th>
      <th>UTests</th>
      <th>STests</th>
      <th>ETests</th>
      <th>NUOPC</th>
      <th>Artifacts</th>
    </tr>
    </thead>
    <tbody>
    {% for r in result_rows %}
    <tr>
      <td>{{r.machine}}</td>
      <td>{{r.compiler}}/{{r.compiler_ver}}</td>
      <td>{{r.mpi}}/{{r.mpi_ver}}</td>
      <td>{{r.bopt}}</td>
      <td>{{r.netcdf}}</td>
      <td>{{r.collect_ts}}</td>
      <td>{{r.build}}</td>
      <td>{{r.unit_pass}}/{{r.unit_fail}}</td>
      <td>{{r.system_pass}}/{{r.system_fail}}</td>
      <td>{{r.example_pass}}/{{r.example_fail}}</td>
      <td>{{r.nuopc_pass}}/{{r.nuopc_fail}}</td>
      <td>{{link(r, "artifacts")}}</td>
      <!-- <td><a href="https://github.com/esmf-org/temp-artifacts/tree/4978f4f03a63265346c6f78ee3347d9414cb79fb/v8.4.0b04/gfortran/9.1.0/O/openmpi/4.0.5">artifacts</a></td> -->
    </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
</body>
</html>